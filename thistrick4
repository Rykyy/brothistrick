-- Variable
local pesan = loadstring(game:HttpGet(("https://raw.githubusercontent.com/Rykyy/roblox/scripts/pesan.lua"),true))()
local plyr = game.Players.LocalPlayer
local gameName = "⚔️MeloBlox RPG"
local moblist;
local tplist;
local beat;
local aunk;

-- Global
getgenv().area = "Tutorial"
getgenv().areatp = "SunnyForest"
getgenv().stat = "Strength"
getgenv().mobname = "Blob"
getgenv().ws = 19
getgenv().jp = 50
getgenv().distance = 7.5


-- Table
local areaTable = {"Tutorial", "SunnyForest", "DenseForest", "ToadstoolGorge", "BullfrogMarsh"}
local mobTable = {}
local statsTable = {"Strength", "Dexterity", "Vitality", "Intelligence"}
local areatpTable = {"SunnyForest", "DenseForest", "ToadstoolGorge", "BullfrogMarsh"}

for _,v in pairs(game:GetService("Workspace").RunTime[getgenv().area]:GetDescendants()) do
    if v.Name == "CreatureName" then
        insert = true
        for _,v2 in pairs(mobTable) do if v2 == tostring(v.Text) then insert = false end end
        if insert then table.insert(mobTable, tostring(v.Text)) end
    end
end

-- Function
local function moveto(obj)
    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = obj

    if not game.Players.LocalPlayer.Character.HumanoidRootPart:FindFirstChild("BodyVelocity") then
        aunk = Instance.new("BodyVelocity", game.Players.LocalPlayer.Character.HumanoidRootPart)
        aunk.Velocity = Vector3.new(0, 0, 0)
        aunk.MaxForce = Vector3.new(9e9, 9e9, 9e9)
    end
end

local function nearestItem()
    local dist = math.huge
    local dekat = nil
    for i,v in pairs(game:GetService("Workspace").RunTime.GroundLoot:GetChildren()) do
        if v.ClassName == "MeshPart" or v.ClassName == "Part" then
            local magnitude = (game.Players.LocalPlayer.Character.HumanoidRootPart.Position - v.Position).magnitude
            if magnitude < dist then
                dist = magnitude
                dekat = v.Name
            end
        end
    end
    return dekat
end

game:GetService("RunService").Heartbeat:Connect(function()
    if game.Players.LocalPlayer.Character.HumanoidRootPart:FindFirstChild("PlayerInfo") then
        game.Players.LocalPlayer.Character.HumanoidRootPart.PlayerInfo:Destroy()
    end
end)  

game:GetService("RunService").Heartbeat:Connect(function()
    if getgenv().enabled == false and game.Players.LocalPlayer.Character.HumanoidRootPart:FindFirstChild("BodyVelocity") then
        aunk:Destroy()
    end
end)

game:GetService("Workspace").RunTime.SunnyForest.Creatures.ChildAdded:Connect(function(v)
    if v:FindFirstChild("HumanoidRootPart") then
        if v.HumanoidRootPart.HealthGUI.HealthBar.CreatureName.Text == "Blob King" or v.HumanoidRootPart.HealthGUI.HealthBar.CreatureName.Text == "BlobKing" then
            if getgenv().area == "SunnyForest" then
                pesan.msg("SunnyForest Notification!!", "Blob King Has Been Spawned!", 2.5)
                for _,v2 in pairs(mobTable) do table.remove(mobTable, _) end 
                for _,v2 in pairs(mobTable) do table.remove(mobTable, _) end

                for _,v in pairs(game:GetService("Workspace").RunTime.SunnyForest.Creatures:GetChildren()) do
                    if v:FindFirstChild("HumanoidRootPart") then
                        insert = true
                        for _,v2 in pairs(mobTable) do if v2 == tostring(v.HumanoidRootPart.HealthGUI.HealthBar.CreatureName.Text) then insert = false end end
                        if insert then table.insert(mobTable, tostring(v.HumanoidRootPart.HealthGUI.HealthBar.CreatureName.Text)) end
                    end 
                end
                moblist:Refresh(mobTable, "Boss Has Been Spawned!")
            end
        end
    end
end)

game:GetService("Workspace").RunTime.SunnyForest.Creatures.ChildRemoved:Connect(function(v)
    if v:FindFirstChild("HumanoidRootPart") then
        if v.HumanoidRootPart.HealthGUI.HealthBar.CreatureName.Text == "Blob King" or v.HumanoidRootPart.HealthGUI.HealthBar.CreatureName.Text == "BlobKing" then
            pesan.msg("SunnyForest Notification!!", "Blob King Has Been Despawned!", 2.5)
            if getgenv().area == "SunnyForest" then
                for _,v2 in pairs(mobTable) do table.remove(mobTable, _) end 
                for _,v2 in pairs(mobTable) do table.remove(mobTable, _) end

                for _,v in pairs(game:GetService("Workspace").RunTime.SunnyForest.Creatures:GetChildren()) do
                    if v:FindFirstChild("HumanoidRootPart") then
                        insert = true
                        for _,v2 in pairs(mobTable) do if v2 == tostring(v.HumanoidRootPart.HealthGUI.HealthBar.CreatureName.Text) then insert = false end end
                        if insert then table.insert(mobTable, tostring(v.HumanoidRootPart.HealthGUI.HealthBar.CreatureName.Text)) end
                    end 
                end
                moblist:Refresh(mobTable, "Boss Has Been Despawned!")
                getgenv().mob = "Blob"
                moblist:SetValue("Blob")
            end
        end
    end
end)

game:GetService("Workspace").RunTime.ToadstoolGorge.Creatures.ChildAdded:Connect(function(v)
    if v:FindFirstChild("HumanoidRootPart") then
        if v.HumanoidRootPart.HealthGUI.HealthBar.CreatureName.Text == "Fungi King" or v.HumanoidRootPart.HealthGUI.HealthBar.CreatureName.Text == "FungiKing" then
            pesan.msg("ToadstoolGorge Notification!!", "Fungi King Has Been Spawned!", 2.5)
            if getgenv().area == "ToadstoolGorge" then
                for _,v2 in pairs(mobTable) do table.remove(mobTable, _) end 
                for _,v2 in pairs(mobTable) do table.remove(mobTable, _) end

                for _,v in pairs(game:GetService("Workspace").RunTime.ToadstoolGorge.Creatures:GetChildren()) do
                    if v:FindFirstChild("HumanoidRootPart") then
                        insert = true
                        for _,v2 in pairs(mobTable) do if v2 == tostring(v.HumanoidRootPart.HealthGUI.HealthBar.CreatureName.Text) then insert = false end end
                        if insert then table.insert(mobTable, tostring(v.HumanoidRootPart.HealthGUI.HealthBar.CreatureName.Text)) end
                    end 
                end
                moblist:Refresh(mobTable, "Boss Has Been Spawned!")
            end
        end
    end
end)

game:GetService("Workspace").RunTime.ToadstoolGorge.Creatures.ChildRemoved:Connect(function(v)
    if v:FindFirstChild("HumanoidRootPart") then
        if v.HumanoidRootPart.HealthGUI.HealthBar.CreatureName.Text == "Fungi King" or v.HumanoidRootPart.HealthGUI.HealthBar.CreatureName.Text == "FungiKing" then
            if getgenv().area == "ToadstoolGorge" then
                pesan.msg("ToadstoolGorge Notification!!", "Fungi King Has Been Despawned!", 2.5)
                for _,v2 in pairs(mobTable) do table.remove(mobTable, _) end 
                for _,v2 in pairs(mobTable) do table.remove(mobTable, _) end

                for _,v in pairs(game:GetService("Workspace").RunTime.ToadstoolGorge.Creatures:GetChildren()) do
                    if v:FindFirstChild("HumanoidRootPart") then
                        insert = true
                        for _,v2 in pairs(mobTable) do if v2 == tostring(v.HumanoidRootPart.HealthGUI.HealthBar.CreatureName.Text) then insert = false end end
                        if insert then table.insert(mobTable, tostring(v.HumanoidRootPart.HealthGUI.HealthBar.CreatureName.Text)) end
                    end 
                end
                moblist:Refresh(mobTable, "Boss Has Been Despawned!")
                getgenv().mob = "Fungi"
                moblist:Setvalue("Fungi")
            end
        end
    end
end)




-- Library
local library = loadstring(game:HttpGet("https://raw.githubusercontent.com/Rykyy/roblox/scripts/uilibrary.lua"))()

local window = library:CreateWindow(gameName)

local main = window:AddFolder("Main")
local misc = window:AddFolder("Misc")

pesan.msg(gameName, "This Script Made By Rykyy#0001\n".."~"..plyr.DisplayName.."~ Thx For Using My Script.", 10)

-- Main Section

local autofarm = main:AddFolder("Auto Farm")
local autostats = main:AddFolder("Auto Stats")
local teleports = main:AddFolder("Teleports")

autofarm:AddLabel({text = "~~Mob Settings"})

autofarm:AddList({text = "Areas List", values = areaTable, callback = function(selected)
    getgenv().area = selected

    for _,v2 in pairs(mobTable) do table.remove(mobTable, _) end 
    for _,v2 in pairs(mobTable) do table.remove(mobTable, _) end

    for _,v in pairs(game:GetService("Workspace").RunTime[selected].Creatures:GetChildren()) do
        if v:FindFirstChild("HumanoidRootPart") then
            insert = true
            for _,v2 in pairs(mobTable) do if v2 == tostring(v.HumanoidRootPart.HealthGUI.HealthBar.CreatureName.Text) then insert = false end end
            if insert then table.insert(mobTable, tostring(v.HumanoidRootPart.HealthGUI.HealthBar.CreatureName.Text)) end
        end 
    end
    moblist:Refresh(mobTable, "Area Has Been Changed")

    pesan.msg("Mob Settings Notification!", "Make sure the area you choose is open otherwise you will be banned", 2.5)
end})

moblist = autofarm:AddList({text = "Mob List", values = mobTable, callback = function(selected)
    getgenv().mobname = selected
    print(selected)
end})

autofarm:AddSlider({text = "Distance", min = 0, max = 10, float = 0.0999, value = getgenv().distance, callback = function(s)
    getgenv().distance = s
end})

autofarm:AddLabel({text = "~~Attack Action Settings"})

autofarm:AddToggle({text = "Slot 1", callback = function(bool)
    a1 = bool

    game:GetService("RunService").Stepped:Connect(function()
        if getgenv().enabled == true and a1 == true then
            local args = {
                [1] = "Action1",
                [2] = "Down"
            }
                                                            
            game:GetService("ReplicatedStorage").Knit.Services.ActionBarService.RE.InputReceived:FireServer(unpack(args))
        end
    end)
end})

autofarm:AddToggle({text = "Slot 2", callback = function(bool)
    a2 = bool

    game:GetService("RunService").Stepped:Connect(function()
        if getgenv().enabled == true and a2 == true then
            local args = {
                [1] = "Action2",
                [2] = "Down"
            }
                                                            
            game:GetService("ReplicatedStorage").Knit.Services.ActionBarService.RE.InputReceived:FireServer(unpack(args))
        end
    end)
end})

autofarm:AddToggle({text = "Slot 3", callback = function(bool)
    a3 = bool

    game:GetService("RunService").Stepped:Connect(function()
        if getgenv().enabled == true and a3 == true then
            local args = {
                [1] = "Action3",
                [2] = "Down"
            }
                                                            
            game:GetService("ReplicatedStorage").Knit.Services.ActionBarService.RE.InputReceived:FireServer(unpack(args))
        end
    end)
end})

autofarm:AddButton({text = "Get All Weapon Skill", callback = function()
    for i,v in pairs(game.Players.LocalPlayer.Character:GetChildren()) do
        if string.find(v.Name, "Axe") then
            local args = {
                [1] = "Action1",
                [2] = "BasicAttack"
            }
                
            game:GetService("ReplicatedStorage").Knit.Services.ActionBarService.RE.SelectSkill:FireServer(unpack(args))
            local args = {
                [1] = "Action2",
                [2] = "GroundSlam"
            }
                
            game:GetService("ReplicatedStorage").Knit.Services.ActionBarService.RE.SelectSkill:FireServer(unpack(args))
            local args = {
                [1] = "Action3",
                [2] = "FireSlash"
            }
                
            game:GetService("ReplicatedStorage").Knit.Services.ActionBarService.RE.SelectSkill:FireServer(unpack(args))
        elseif string.find(v.Name, "Sword") and not string.find(v.Name, "Shield")  then
            local args = {
                [1] = "Action1",
                [2] = "BasicAttack"
            }
                
            game:GetService("ReplicatedStorage").Knit.Services.ActionBarService.RE.SelectSkill:FireServer(unpack(args))
            local args = {
                [1] = "Action2",
                [2] = "SwiftStrike"
            }
                
            game:GetService("ReplicatedStorage").Knit.Services.ActionBarService.RE.SelectSkill:FireServer(unpack(args))
            local args = {
                [1] = "Action3",
                [2] = "Whirlwind"
            }
                
            game:GetService("ReplicatedStorage").Knit.Services.ActionBarService.RE.SelectSkill:FireServer(unpack(args))
        elseif string.find(v.Name, "Shield") then
            local args = {
                [1] = "Action1",
                [2] = "BasicAttack"
            }
                
            game:GetService("ReplicatedStorage").Knit.Services.ActionBarService.RE.SelectSkill:FireServer(unpack(args))
            local args = {
                [1] = "Action2",
                [2] = "BombShield"
            }
                
            game:GetService("ReplicatedStorage").Knit.Services.ActionBarService.RE.SelectSkill:FireServer(unpack(args))
            local args = {
                [1] = "Action3",
                [2] = "HardSkin"
            }
                
            game:GetService("ReplicatedStorage").Knit.Services.ActionBarService.RE.SelectSkill:FireServer(unpack(args))
        end
    end
end})

autofarm:AddLabel({text = "~~Farm"})

autofarm:AddToggle({text = "Enabled", callback = function(bool)
    getgenv().enabled = bool

    
    beat = game:GetService("RunService").Heartbeat:Connect(function()
        pcall(function()
            if getgenv().enabled == true then
                for i,v in next, game:GetService("Workspace").RunTime[getgenv().area].Creatures:GetChildren() do
                    if v:FindFirstChild("HumanoidRootPart") then
                        if v.HumanoidRootPart.HealthGUI.HealthBar.CreatureName.Text == getgenv().mobname and getgenv().enabled == true then
                            repeat
                                moveto(v.HumanoidRootPart.CFrame * CFrame.new(0,getgenv().distance,0) * CFrame.Angles(math.rad(-90),0,0))
                                wait()
                            until getgenv().enabled == false or not v:FindFirstChild("HumanoidRootPart")
                            if getgenv().enabled == false then
                                beat:Disconnect()
                            end
                        end
                    end
                end
            end
        end)
    end)       
end})

--[[autofarm:AddToggle({text = "Auto Loot", callback = function(bool)
    getgenv().loot = bool

    while wait() do
        if getgenv().loot == true then
            local items = tostring(nearestItem())
            local itemsgsubed = items:gsub('[%a]-[%p][%a][%x][%p]','','1')
            wait()
            local TargetFunc = game:GetService("ReplicatedStorage").Knit.Services.GroundItemService.RF.PickUpItem;
            TargetFunc:InvokeServer(itemsgsubed);
        end
    end
end})]]

autostats:AddList({text = "Stats List", values = statsTable, callback = function(selected)
    getgenv().stat = selected
    wait(0.5)
end})

autostats:AddToggle({text = "Enabled", callback = function(bool)
    getgenv().enabled1 = bool

    while wait() do
        if getgenv().enabled1 == true then
            local args = {
                [1] = getgenv().stat
            }
            
            game:GetService("ReplicatedStorage").Knit.Services.PrimaryStatsService.RF.AttributeStatPoint:InvokeServer(unpack(args))
        end
    end
end})

teleports:AddLabel({text = "~~City"})

teleports:AddButton({text = "Shop", callback = function()
    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(277, 4, -0)
end})

teleports:AddButton({text = "Bank", callback = function()
    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(274, 4, 131)
end})

teleports:AddLabel({text = "~~Areas"})

tplist = teleports:AddList({text = "Areas List", values = areatpTable, callback = function(selected)
    getgenv().areatp = selected

    if selected then
        pesan.msg("Teleport Notification!", "Make sure the area you choose is open otherwise you will be banned", 2.5)
    end
end})

teleports:AddButton({text = "Teleport", callback = function()
    for i,v in pairs(game:GetService("Workspace").RegionsAssets[getgenv().areatp].Environment:GetChildren()) do
        if string.find(v.Name, "Zone") then
            game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = v.CFrame * CFrame.new(0,3,0)
        end
    end
end})


-- Misc Section

misc:AddLabel({text = "~~Character"})

misc:AddSlider({text = "WalkSpeed", min = 19, max = 125, value = 16, callback = function(s)
    getgenv().ws = s
end})

misc:AddSlider({text = "JumpPower", min = 50, max = 100, value = 50, callback = function(s)
    getgenv().jp = s
end})

misc:AddToggle({text = "Enabled", callback = function(bool)
    getgenv().wsjp =  bool

    local beat2

    beat2 = game:GetService("RunService").Heartbeat:Connect(function()
        if getgenv().wsjp == true then
            plyr.Character.Humanoid.WalkSpeed = getgenv().ws
            plyr.Character.Humanoid.JumpPower = getgenv().jp
        else
            plyr.Character.Humanoid.WalkSpeed = 19
            plyr.Character.Humanoid.JumpPower = 50
            beat2:Disconnect()  
        end
    end)
end})

misc:AddLabel({text = "~~Admin Gui"})

misc:AddButton({text = "Infinite Yield", callback = function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source"))()  
end})

misc:AddLabel({text = "~~UI Settings"})

misc:AddBind({text = "Ui Toggle", key = Enum.KeyCode.RightAlt, callback = function()
    library:ToggleUi()
end})

misc:AddButton({text = "Destroy UI", callback = function()
    for i,v in pairs(game:GetService("CoreGui"):GetDescendants()) do
        if v.ClassName == "TextLabel" and v.Text == gameName then
            v.Parent:Destroy()
        end
    end
end})

library:Init()  
