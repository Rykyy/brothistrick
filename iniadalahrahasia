-- Variable
local TweenService = game:GetService("TweenService")
local plr = game:GetService("Players").LocalPlayer
local reps = game:GetService("ReplicatedStorage")
local wrk = game:GetService("Workspace")
local gameName = "Rainbow Piece"
local weaponlist;
local aunk;
local folderMob = Instance.new("Folder", wrk)
folderMob.Name = "MobFolder[NO LAG :)))]"


-- Table
local mobTableBackup = {}

for i,v in pairs(wrk:GetDescendants()) do
    insert = true 
    if v.Name == "NPC" and not string.find(v.Parent.Name, "SHOP") then
        for i,x in pairs(mobTableBackup) do if x == v.Parent.Name then insert = false end end
        if insert == true then table.insert(mobTableBackup, v.Parent.Name) end
    end
end  

local weaponTable = {}

for i,v in pairs(plr.Backpack:GetChildren()) do
    if v.ClassName == "Tool" and not v:FindFirstChild("EatScript") then
        table.insert(weaponTable, v.Name)
    end
end

table.sort(mobTableBackup)

-- Function

function shop()
    local x = {}
    for _, v in ipairs(game:GetService("HttpService"):JSONDecode(game:HttpGetAsync("https://games.roblox.com/v1/games/" .. game.PlaceId .. "/servers/Public?sortOrder=Asc&limit=100")).data) do
        if type(v) == "table" and v.maxPlayers > v.playing and v.id ~= game.JobId then
           x[#x + 1] = v.id
        end
    end
    if #x > 0 then
       game:GetService("TeleportService"):TeleportToPlaceInstance(game.PlaceId, x[math.random(1, #x)])
       wait(5)
       game:GetService("TeleportService"):TeleportToPlaceInstance(game.PlaceId, x[math.random(1, #x)])
	else
        print("....")
	end
end

game:GetService("RunService").Heartbeat:Connect(function() -- Move Mob To Folder Mob
    for i,v in pairs(wrk:GetChildren()) do
        if v.ClassName == "Model" then
            if table.find(mobTableBackup, v.Name) then
                v.Parent = folderMob
            end
        end
    end
end)

game:GetService("RunService").Heartbeat:Connect(function() -- Move Mob To Folder Mob
    for i,v in pairs(wrk:GetChildren()) do
        if v.ClassName == "Model" then
            for i,x in pairs(v:GetChildren()) do
                if table.find(mobTableBackup, x.Name) then
                    x.Parent = folderMob
                end
            end
        end
    end
end)  


repeat wait() until game:IsLoaded() 
    plr.Idled:connect(function()
    game:GetService("VirtualUser"):ClickButton2(Vector2.new())
end)

-- Vape ui library [Ikky = Added Refresh Dropdown + Precise Slider]

local library = loadstring(game:HttpGet("https://raw.githubusercontent.com/Rykyy/brothistrick/main/vapeuix.txt"))()


local window = library:CreateWindow(gameName, Color3.fromRGB(123, 7, 144))

local credits = window:CreateTab("Credits")
local main = window:CreateTab("Main")
local misc = window:CreateTab("Misc")

-- Credits Tab

credits:CreateLabel("Made By : Ikky#8337")
credits:CreateLabel("Tester : Idk LOL")

credits:CreateLabel("------------------------------[Gui]------------------------------")

credits:CreateLabel("~~[Press Right-Ctrl To Hide Gui]~~")

credits:CreateButton("Destroy Gui", function()
    game.CoreGui[library.Name]:Destroy()
end)  

-- Main Tab
main:CreateLabel("------------------------------[Mob]------------------------------")

main:CreateDropdown("Mob List", mobTableBackup, function(selected)
    getgenv().mobname = selected
end)

main:CreateLabel("-------------------------[Weapon]----------------------------")
weaponlist = main:CreateDropdown("Weapon List", weaponTable, function(selected)
    getgenv().weaponname = selected
end)

main:CreateButton("Refresh Weapon List", function()
    for _,v2 in pairs(weaponTable) do table.remove(weaponTable, _) end

    for i,v in pairs(plr.Backpack:GetChildren()) do
        insert = true
        if v.ClassName == "Tool" and not v:FindFirstChild("EatScript") then
            for i,v2 in pairs(weaponTable) do if v2 == v.Name then insert = false end end
            if insert == true then table.insert(weaponTable, v.Name) end
        end
    end
    weaponlist:Refresh(weaponTable)
end)

main:CreateLabel("------------------------------[Skill]------------------------------")

main:CreateSlider("All Skill Delay [Not Combat]", 1,6,1,1, function(s)
    getgenv().skilldelay = s
end)

main:CreateToggle("Delete FX", nil, function(bool)
    getgenv().fx = bool
    
    beat = game:GetService("RunService").Heartbeat:Connect(function()
        if getgenv().fx == true then
            for i,v in pairs(wrk:GetChildren()) do
                if string.find(v.Name, "FX") then
                    v:Destroy()
                end
            end
        else
            beat:Disconnect()
        end
    end)
end)

main:CreateToggle("All Skill [Dont Use Brook :(]", nil , function(bool)
    getgenv().skill = bool

    while wait() do
        if getgenv().skill == true then
            if getgenv().weaponname == "Combat" then
                for i,v in pairs(plr.Backpack["Combat"]:GetChildren()) do
                    if v.Name == "Combo" then
                        v.C0:FireServer()
                        v.C1:FireServer()
                    end
                end
            elseif getgenv().weaponname ~= "Combat" then
                for i,v in pairs(plr.Backpack:GetChildren()) do
                    if v.Name ~= "Combat" then
                        for i,x in pairs(v:GetChildren()) do
                            if x.ClassName == "LocalScript" then
                                x.Fire:FireServer()
                                wait(getgenv().skilldelay)
                            end
                        end
                    end
                end
            end
        else
            break;
        end
    end
end)

main:CreateLabel("------------------------------[Farm]------------------------------")

main:CreateToggle("Enabled", nil, function(bool)
    getgenv().farm = bool
    local aunk;

    aunp = game:GetService("RunService").Heartbeat:Connect(function() -- Noclip
        if getgenv().farm == true and getgenv().weaponname ~= "Combat" then
            for i, v in pairs(plr.Character:GetDescendants()) do
                if v:IsA("BasePart") and v.CanCollide == true then
                    v.CanCollide = false
                    plr.Character.HumanoidRootPart.Velocity = Vector3.new(0, 0, 0)
                end
            end
        elseif getgenv().farm == false then
            aunp:Disconnect()
        end
    end)

    bruh = game:GetService("RunService").Heartbeat:Connect(function() -- Farm
        if getgenv().farm == true then
            for i,v in pairs(folderMob:GetChildren()) do
                if v.ClassName == "Model" then
                    if v.Name == getgenv().mobname then
                        if v:FindFirstChild("HumanoidRootPart") and v:FindFirstChild("Humanoid") then
                            if v.Humanoid.Health ~= 0 and getgenv().farm == true then
                                repeat
                                    if getgenv().weaponname ~= "Combat" then
                                        plr.Character.HumanoidRootPart.CFrame = v.HumanoidRootPart.CFrame * CFrame.new(0,-7,0) * CFrame.Angles(math.rad(90),0,0)
                                    elseif getgenv().weaponname == "Combat" then
                                        plr.Character.HumanoidRootPart.CFrame = v.HumanoidRootPart.CFrame * CFrame.new(0,5,0) * CFrame.Angles(math.rad(-90),0,0)
                                    end
                                wait()
                                until getgenv().farm == false or not v:FindFirstChild("HumanoidRootPart") or v.Humanoid.Health == 0
                            end
                        end
                    end
                end
            end 
        elseif getgenv().farm == false then
            bruh:Disconnect()
        end
    end)

    if getgenv().farm == false then
        if not plr.Character.HumanoidRootPart:FindFirstChild("BodyVelocity") then
            aunk = Instance.new("BodyVelocity", plr.Character.HumanoidRootPart)
            aunk.Velocity = Vector3.new(0, 0, 0)
            aunk.MaxForce = Vector3.new(9e9, 9e9, 9e9)
        end
        aunk:Destroy()
        backtosafeTp()
    end
end)

main:CreateLabel("------------------------------[Get Fruit]-------------------------")

main:CreateSlider("Drop & Get Delay ", 0,1,0.1,0, function(s)
    getgenv().fruitdelay = s
end)

main:CreateToggle("Auto Drop Fruit", nil, function(bool)
    getgenv().drop = bool

    while wait(getgenv().fruitdelay) do
        if getgenv().drop == true and getgenv().fruit == true then
            for i,v in pairs(plr.Backpack:GetChildren()) do
                if v.ClassName == "Tool" and v:FindFirstChild("EatScript") then
                    plr.Character.Humanoid:EquipTool(v)
                    game:GetService('VirtualInputManager'):SendKeyEvent(true,"Backspace",false,uwu)
                end
            end
        elseif getgenv().drop == false then
            break;
        end
    end
end)

main:CreateToggle("Get Fruit", nil, function(bool)
    getgenv().fruit = bool

    while wait(getgenv().fruitdelay) do
        if getgenv().fruit == true then
            plr.PlayerGui.SpinGui.LOL.Spin.Spin.Reward:FireServer("Legendary")
        else
            break;
        end
    end
end)
            



-- Misc Tab

misc:CreateLabel("------------------------------[Server]------------------------------")

misc:CreateButton("Rejoin", function()
    game:GetService('TeleportService'):TeleportToPlaceInstance(game.PlaceId, game.JobId, plr)
end)

misc:CreateButton("Server Hop", function()
    shop()
end)

misc:CreateLabel("------------------------------[Player]------------------------------")

misc:CreateSlider("Walk Speed", 19, 125, 1, 19, function(s)
    getgenv().ws = s
end)

misc:CreateSlider("Jump Power", 50, 125, 1, 50, function(s)
    getgenv().jp = s
end)

misc:CreateToggle("Increase", nil, function(bool)
    getgenv().wsjp =  bool

    local beat2

    beat2 = game:GetService("RunService").Heartbeat:Connect(function()
        if getgenv().wsjp == true then
            plr.Character.Humanoid.WalkSpeed = getgenv().ws
            plr.Character.Humanoid.JumpPower = getgenv().jp
        else
            plr.Character.Humanoid.WalkSpeed = 19
            plr.Character.Humanoid.JumpPower = 50
            beat2:Disconnect()  
        end
    end)
end)
